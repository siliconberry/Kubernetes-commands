import asyncio
import os
from slack_bolt import App
from slack_bolt.adapter.socket_mode import SocketModeHandler

# Replace with your Slack Bolt app's API token
SLACK_BOT_TOKEN = os.environ.get("SLACK_BOT_TOKEN")
APP_ID = os.environ.get("SLACK_APP_ID")

# Initialize the Slack Bolt app
app = App(token=SLACK_BOT_TOKEN)

# Define a simple event handler to listen for "app_mention" events
@app.event("app_mention")
def handle_app_mention(body, say):
    user_id = body["event"]["user"]
    channel_id = body["event"]["channel"]
    text = body["event"]["text"]

    # Respond to the user in the same channel
    say(f"Hi, <@{user_id}>! You said: {text}")

# Create a SocketModeHandler instance
handler = SocketModeHandler(app, APP_ID)

# Start the SocketModeHandler
async def main():
    await handler.start()

asyncio.run(main())
