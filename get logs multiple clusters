from diagrams import Diagram, Cluster
from diagrams.generic.network import Switch
from diagrams.generic.compute import Rack, Server

with Diagram("Architecture", show=False, filename="architecture", format="png"):
    input_servers = [Server(f"Input Server {i}") for i in range(1, 6)]
    f5 = Switch("F5")
    processing_server = Rack("Processing Server")
    output_servers = [Server(f"Output Server {i}") for i in range(1, 6)]

    with Cluster("Input Servers"):
        input_servers

    f5 >> processing_server

    with Cluster("Output Servers"):
        output_servers

    input_servers >> f5
    processing_server >> output_servers
